<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/" xmlns:height="http://www.w3.org/1999/xhtml"
      xmlns:width="http://www.w3.org/1999/xhtml">
<head th:replace="fragments :: head"></head>
<head>    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" type="text/css" href="styles.css" /></head>
</head>
<body>
    <div class="container">
        <div class="col-md-auto">

            <!--TODO: Want to possibly add in a dashboard of sorts for this page maybe?-->

            <header th:replace="fragments :: header"></header>

            <h1>Outdoor Events</h1>

            <text th:text="${hello}"></text>

            <br>
            <table class="table table-success table-striped table-hover caption-top">
                <caption>Your Event Titles</caption>
                <tr th:each="event : ${userEvents}">
                    <td th:text="${event.name}"></td>
                </tr>
            </table>

            <br>
            <table class="table table-striped table-success table-hover caption-top">
                <caption>Event Titles Posted by You and Other Users</caption>
                <tr th:each="event : ${events}">
                    <td th:text="${event.name}"></td>
                </tr>
            </table>


            <div id="map"></div>
            <footer th:replace="fragments :: footer"></footer>
        </div>
    </div>

<script th:inline="javascript">
    //var locations = [[${locations}]];
    function initMap() {
      //const infowindow = new google.maps.InfoWindow();
      let map = new google.maps.Map(document.getElementById("map"), {
        mapId: "545a8287abd16813",
        center: { lat: 42, lng: -70 },
        zoom: 8,
      });

    // addMarker(locations);
    // function addMarker(locations){
    //     for (let i = 0; i < locations.length; i++) {
    //         var marker = Array(locations.length);
    //         marker[i] = new google.maps.Marker({
    //         position: {lat: parseFloat(locations[i].latitude), lng: parseFloat(locations[i].longitude)},
    //         map: map,
    //         content: `<h2>Name: ${locations[i].name}</h2>  <h4>${locations[i].description}</h4>`
    //     })

    //     // var infowindow = Array(locations.length)
    //     // var infowindow = new google.maps.InfoWindow({
    //     //     content: marker[i].content,
    //     //     maxWidth: 160
    //     //     position: {lat: parseFloat(locations[i].latitude), lng: parseFloat(locations[i].longitude)}
    //     // })
    //     console.log(typeof(marker[i].content))

    //     marker[i].addListener("click", function(){
    //         infowindow.close();
    //         infowindow.setContent(`<h2>Name: ${locations[i].name}</h2>  <h4>${locations[i].description}</h4>`);
    //         infowindow.setPosition({lat: parseFloat(locations[i].latitude), lng: parseFloat(locations[i].longitude)});
    //         infowindow.open(map, marker[i]);
    //     });

    //     }

    // }
}
</script>
<!-- Async script executes immediately and must be after any DOM elements used in callback. -->
<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZLXWwY5Nh2idEZ2Ee_lb3f7DPOdxdkFo&callback=initMap&libraries=&v=weekly"
        async
></script>
</body>
</html>
